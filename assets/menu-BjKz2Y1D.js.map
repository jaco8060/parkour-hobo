{"version":3,"file":"menu-BjKz2Y1D.js","sources":["../../src/menu.ts"],"sourcesContent":["// Pixelated menu system for course selection and creation\r\nimport { STORAGE_KEYS } from \"./utils/config.js\";\r\nimport { \r\n  createElement, \r\n  removeElement, \r\n  clearBuilderState,\r\n  loadSavedCourses, \r\n  saveSavedCourses \r\n} from \"./utils/helpers.js\";\r\nimport { SavedCourse } from \"./utils/types.js\";\r\nimport { showNotification } from \"./components/Overlay.js\";\r\n\r\n/**\r\n * Creates and displays the main menu\r\n */\r\nexport function showMainMenu(\r\n  onLoadCourse: (course: SavedCourse) => void, \r\n  onCreateNew: (template: string) => void\r\n): void {\r\n  // Remove any existing menu\r\n  const existingMenu = document.getElementById(\"pixelated-menu\");\r\n  if (existingMenu) {\r\n    existingMenu.remove();\r\n  }\r\n  \r\n  // Get saved courses from localStorage\r\n  const savedCourses = loadSavedCourses();\r\n  \r\n  // Create menu container with pixelated style\r\n  const menuContainer = createElement(\"div\", \r\n    { id: \"pixelated-menu\" },\r\n    {\r\n      position: \"absolute\",\r\n      top: \"0\",\r\n      left: \"0\",\r\n      width: \"100%\",\r\n      height: \"100%\",\r\n      backgroundColor: \"#121212\",\r\n      display: \"flex\",\r\n      flexDirection: \"column\",\r\n      alignItems: \"center\",\r\n      justifyContent: \"center\",\r\n      zIndex: \"10000\",\r\n      fontFamily: \"'Press Start 2P', 'Courier New', monospace\",\r\n      color: \"white\",\r\n      imageRendering: \"pixelated\"\r\n    }\r\n  );\r\n  \r\n  // Create pixelated title\r\n  const title = createElement(\"h1\", \r\n    {},\r\n    {\r\n      fontSize: \"4vw\",\r\n      textAlign: \"center\",\r\n      marginBottom: \"5vh\",\r\n      textShadow: \"3px 3px 0 #4CAF50, 6px 6px 0 #333\",\r\n      letterSpacing: \"2px\"\r\n    },\r\n    \"PARKOUR HOBO<br>COURSE BUILDER\"\r\n  );\r\n  menuContainer.appendChild(title);\r\n  \r\n  // Create menu content container\r\n  const menuContent = createElement(\"div\", \r\n    {},\r\n    {\r\n      width: \"80%\",\r\n      maxWidth: \"800px\",\r\n      backgroundColor: \"rgba(0, 0, 0, 0.7)\",\r\n      border: \"4px solid #4CAF50\",\r\n      borderRadius: \"8px\",\r\n      padding: \"20px\",\r\n      display: \"flex\",\r\n      flexDirection: \"column\",\r\n      gap: \"15px\"\r\n    }\r\n  );\r\n  \r\n  // Add \"New Course\" button\r\n  const newCourseSection = createElement(\"div\", \r\n    {},\r\n    {\r\n      display: \"flex\",\r\n      flexDirection: \"column\",\r\n      gap: \"10px\",\r\n      marginBottom: \"20px\",\r\n      padding: \"15px\",\r\n      border: \"2px dashed #4CAF50\",\r\n      backgroundColor: \"rgba(76, 175, 80, 0.1)\"\r\n    }\r\n  );\r\n  \r\n  const newCourseTitle = createElement(\"h2\", \r\n    {},\r\n    {\r\n      fontSize: \"18px\",\r\n      margin: \"0 0 10px 0\"\r\n    },\r\n    \"Create New Course\"\r\n  );\r\n  newCourseSection.appendChild(newCourseTitle);\r\n  \r\n  // Add template size selection\r\n  const templateSelectRow = createElement(\"div\", \r\n    {},\r\n    {\r\n      display: \"flex\",\r\n      justifyContent: \"space-between\",\r\n      gap: \"10px\"\r\n    }\r\n  );\r\n  \r\n  ['small', 'medium', 'large'].forEach(size => {\r\n    const button = createElement(\"button\", \r\n      { \"data-template\": size },\r\n      {\r\n        flex: \"1\",\r\n        padding: \"10px\",\r\n        backgroundColor: size === 'medium' ? \"#4CAF50\" : \"#333\",\r\n        color: \"white\",\r\n        border: \"none\",\r\n        borderRadius: \"4px\",\r\n        cursor: \"pointer\",\r\n        fontFamily: \"'Press Start 2P', 'Courier New', monospace\",\r\n        fontSize: \"14px\",\r\n        boxShadow: \"3px 3px 0 #222\",\r\n        outline: \"none\",\r\n        imageRendering: \"pixelated\"\r\n      },\r\n      size.toUpperCase()\r\n    );\r\n    \r\n    button.addEventListener(\"click\", () => {\r\n      // Start builder mode with selected template\r\n      onCreateNew(size);\r\n    });\r\n    \r\n    templateSelectRow.appendChild(button);\r\n  });\r\n  \r\n  newCourseSection.appendChild(templateSelectRow);\r\n  menuContent.appendChild(newCourseSection);\r\n  \r\n  // Add saved courses section if any exist\r\n  if (savedCourses.length > 0) {\r\n    const savedCoursesTitle = createElement(\"h2\", \r\n      {},\r\n      {\r\n        fontSize: \"18px\",\r\n        margin: \"10px 0\",\r\n        borderBottom: \"2px solid #4CAF50\",\r\n        paddingBottom: \"5px\"\r\n      },\r\n      \"Saved Courses\"\r\n    );\r\n    menuContent.appendChild(savedCoursesTitle);\r\n    \r\n    // Create courses list\r\n    const coursesList = createElement(\"div\", \r\n      {},\r\n      {\r\n        display: \"flex\",\r\n        flexDirection: \"column\",\r\n        gap: \"10px\",\r\n        maxHeight: \"40vh\",\r\n        overflowY: \"auto\",\r\n        padding: \"5px\"\r\n      }\r\n    );\r\n    \r\n    savedCourses.forEach((course, index) => {\r\n      const courseContainer = createElement(\"div\", \r\n        {},\r\n        {\r\n          display: \"flex\",\r\n          justifyContent: \"space-between\",\r\n          alignItems: \"center\",\r\n          padding: \"10px\",\r\n          backgroundColor: \"rgba(20, 20, 20, 0.8)\",\r\n          borderRadius: \"4px\",\r\n          border: \"2px solid #333\"\r\n        }\r\n      );\r\n      \r\n      // Get stats for this course\r\n      const blockCount = course.blocks?.length || 0;\r\n      const template = course.template || \"medium\";\r\n      \r\n      const courseInfo = createElement(\"div\", \r\n        {},\r\n        {\r\n          display: \"flex\",\r\n          flexDirection: \"column\",\r\n          gap: \"5px\"\r\n        },\r\n        `\r\n          <div style=\"font-size:16px;color:#4CAF50;\">${course.name}</div>\r\n          <div style=\"font-size:12px;opacity:0.8;\">${blockCount} blocks • ${template} template</div>\r\n        `\r\n      );\r\n      courseContainer.appendChild(courseInfo);\r\n      \r\n      const btnContainer = createElement(\"div\", \r\n        {},\r\n        {\r\n          display: \"flex\",\r\n          gap: \"10px\"\r\n        }\r\n      );\r\n      \r\n      // Load button\r\n      const loadBtn = createElement(\"button\", \r\n        {},\r\n        {\r\n          padding: \"8px 15px\",\r\n          backgroundColor: \"#4CAF50\",\r\n          color: \"white\",\r\n          border: \"none\",\r\n          borderRadius: \"4px\",\r\n          cursor: \"pointer\",\r\n          fontFamily: \"'Press Start 2P', 'Courier New', monospace\",\r\n          fontSize: \"12px\",\r\n          boxShadow: \"2px 2px 0 #222\"\r\n        },\r\n        \"LOAD\"\r\n      );\r\n      \r\n      loadBtn.addEventListener(\"click\", () => {\r\n        onLoadCourse(course);\r\n      });\r\n      \r\n      btnContainer.appendChild(loadBtn);\r\n      \r\n      // Delete button\r\n      const deleteBtn = createElement(\"button\", \r\n        {},\r\n        {\r\n          padding: \"8px 15px\",\r\n          backgroundColor: \"#f44336\",\r\n          color: \"white\",\r\n          border: \"none\",\r\n          borderRadius: \"4px\",\r\n          cursor: \"pointer\",\r\n          fontFamily: \"'Press Start 2P', 'Courier New', monospace\",\r\n          fontSize: \"12px\",\r\n          boxShadow: \"2px 2px 0 #222\"\r\n        },\r\n        \"DELETE\"\r\n      );\r\n      \r\n      deleteBtn.addEventListener(\"click\", (e) => {\r\n        e.stopPropagation();\r\n        \r\n        if (confirm(\"Are you sure you want to delete this course?\")) {\r\n          // Remove course and refresh menu\r\n          const updatedCourses = savedCourses.filter((_, i) => i !== index);\r\n          saveSavedCourses(updatedCourses);\r\n          showMainMenu(onLoadCourse, onCreateNew);\r\n          showNotification(`Course \"${course.name}\" deleted`, 3000);\r\n        }\r\n      });\r\n      \r\n      btnContainer.appendChild(deleteBtn);\r\n      courseContainer.appendChild(btnContainer);\r\n      coursesList.appendChild(courseContainer);\r\n    });\r\n    \r\n    menuContent.appendChild(coursesList);\r\n  } else {\r\n    // Show message if no saved courses\r\n    const noCoursesMsg = createElement(\"div\", \r\n      {},\r\n      {\r\n        textAlign: \"center\",\r\n        padding: \"20px\",\r\n        backgroundColor: \"rgba(20, 20, 20, 0.8)\",\r\n        borderRadius: \"4px\",\r\n        color: \"#aaa\",\r\n        fontStyle: \"italic\"\r\n      },\r\n      \"No saved courses yet. Create a new course to get started!\"\r\n    );\r\n    menuContent.appendChild(noCoursesMsg);\r\n  }\r\n  \r\n  menuContainer.appendChild(menuContent);\r\n  \r\n  // Add pixelated footer\r\n  const footer = createElement(\"div\", \r\n    {},\r\n    {\r\n      marginTop: \"30px\",\r\n      fontSize: \"12px\",\r\n      opacity: \"0.7\",\r\n      textAlign: \"center\"\r\n    },\r\n    \"© 2025 Parkour Hobo - Use B key to switch between Builder and Player modes\"\r\n  );\r\n  menuContainer.appendChild(footer);\r\n  \r\n  // Add to document\r\n  document.body.appendChild(menuContainer);\r\n  \r\n  // Add pixelated background\r\n  addPixelatedBackground(menuContainer);\r\n}\r\n\r\n/**\r\n * Adds a pixelated background effect to the menu\r\n */\r\nfunction addPixelatedBackground(container: HTMLElement): void {\r\n  // Create canvas for pixelated background\r\n  const canvas = document.createElement('canvas');\r\n  const pixelSize = 10; // Size of each \"pixel\"\r\n  \r\n  // Set canvas size\r\n  canvas.width = window.innerWidth;\r\n  canvas.height = window.innerHeight;\r\n  \r\n  // Get context\r\n  const ctx = canvas.getContext('2d');\r\n  if (!ctx) return;\r\n  \r\n  // Fill with pixels of various colors\r\n  for (let x = 0; x < canvas.width; x += pixelSize) {\r\n    for (let y = 0; y < canvas.height; y += pixelSize) {\r\n      // Generate mostly dark pixels with occasional accent pixels\r\n      let r, g, b;\r\n      \r\n      const rand = Math.random();\r\n      if (rand < 0.005) {\r\n        // Accent pixel (green for Parkour Hobo)\r\n        r = 50 + Math.random() * 20;\r\n        g = 180 + Math.random() * 75;\r\n        b = 50 + Math.random() * 20;\r\n      } else {\r\n        // Dark pixel with slight variation\r\n        const value = 10 + Math.random() * 30;\r\n        r = value;\r\n        g = value;\r\n        b = value + (Math.random() < 0.2 ? 10 : 0); // Slight blue tint sometimes\r\n      }\r\n      \r\n      ctx.fillStyle = `rgb(${r}, ${g}, ${b})`;\r\n      ctx.fillRect(x, y, pixelSize, pixelSize);\r\n    }\r\n  }\r\n  \r\n  // Apply canvas as background\r\n  const dataUrl = canvas.toDataURL();\r\n  container.style.backgroundImage = `url(${dataUrl})`;\r\n  container.style.backgroundSize = '100% 100%';\r\n} "],"names":["showMainMenu","onLoadCourse","onCreateNew","existingMenu","savedCourses","loadSavedCourses","menuContainer","createElement","title","menuContent","newCourseSection","newCourseTitle","templateSelectRow","size","button","savedCoursesTitle","coursesList","course","index","courseContainer","blockCount","_a","template","courseInfo","btnContainer","loadBtn","deleteBtn","e","updatedCourses","_","i","saveSavedCourses","showNotification","noCoursesMsg","footer","addPixelatedBackground","container","canvas","pixelSize","ctx","x","y","g","b","value","dataUrl"],"mappings":"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"}